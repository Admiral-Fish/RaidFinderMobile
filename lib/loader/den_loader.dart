import 'dart:convert';
import 'package:flutter/services.dart' show rootBundle;
import 'package:raidfinder/results/raid.dart';
import 'package:raidfinder/results/den.dart';

const List<List<String>> denHashes = [
  ["173f0456dc5dfc52", "ba83e1671012ebcd"], // 16 52
  ["17458556dc634333", "ba8745671015cb90"], // 37 64
  ["17458b56dc634d65", "450421d99cf882c1"], // 31 90
  ["17428156dc610690", "ba805467100fc65f"], // 3 51
  ["17428856dc611275", "ba805767100fcb78"], // 4 46
  ["17458956dc6349ff", "ba8747671015cef6"], // 33 62
  ["17459356dc635afd", "ba8746671015cd43"], // 39 65
  ["17428356dc6109f6", "ba805967100fcede"], // 1 48
  ["17458b56dc634d65", "450421d99cf882c1"], // 31 90
  ["17491656dc666f6d", "ba83da671012dfe8"], // 26 59
  ["17490856dc6657a3", "4500a2d99cf5751d"], // 28 79
  ["17491656dc666f6d", "ba83db671012e19b"], // 26 58
  ["17428856dc611275", "45041fd99cf87f5b"], // 4 92
  ["17491656dc666f6d", "ba83da671012dfe8"], // 26 59
  ["17428256dc610843", "ba805367100fc4ac"], // 2 50
  ["17428656dc610f0f", "ba805867100fcd2b"], // 6 47
  ["0000000000000000", "0000000000000000"], // Special
  ["17428556dc610d5c", "ba805d67100fd5aa"], // 7 44
  ["17459356dc635afd", "ba8746671015cd43"], // 39 65
  ["17458b56dc634d65", "ba83d8671012dc82"], // 31 61
  ["17458b56dc634d65", "ba83d8671012dc82"], // 31 61
  ["17428b56dc61178e", "ba8a4e67101810b2"], // 9 75
  ["17428b56dc61178e", "ba8a4e67101810b2"], // 9 75
  ["17501a56dc6c94e7", "ba805d67100fd5aa"], // 44 42
  ["17428556dc610d5c", "ba805d67100fd5aa"], // 7 44
  ["17428b56dc61178e", "450420d99cf8810e"], // 9 91
  ["17458756dc634699", "ba8748671015d0a9"], // 35 63
  ["17459256dc63594a", "ba8745671015cb90"], // 38 64
  ["17428c56dc611941", "450420d99cf8810e"], // 8 91
  ["17501b56dc6c969a", "ba8a496710180833"], // 41 76
  ["17501b56dc6c969a", "ba8a496710180833"], // 41 76
  ["17428756dc6110c2", "ba805767100fcb78"], // 5 46
  ["17428356dc6109f6", "ba805c67100fd3f7"], // 1 43
  ["173f0356dc5dfa9f", "ba805467100fc65f"], // 15 51
  ["173f0056dc5df586", "ba805e67100fd75d"], // 12 45
  ["173eff56dc5df3d3", "ba805a67100fd91"], // 11 49
  ["173f0356dc5dfa9f", "45009ed99cf56e51"], // 15 83
  ["173eff56dc5df3d3", "450097d99cf5626c"], // 11 84
  ["173efe56dc5df220", "ba805967100fcede"], // 10 48
  ["17501b56dc6c969a", "ba8a496710180833"], // 41 76
  ["17490756dc6655f0", "ba83d9671012de35"], // 29 60
  ["17501b56dc6c969a", "ba8a496710180833"], // 41 76
  ["17490756dc6655f0", "ba83d9671012de35"], // 29 60
  ["17490756dc6655f0", "450425d99cf8898d"], // 29 86
  ["173efe56dc5df220", "ba805967100fcede"], // 10 48
  ["173f0256dc5df8ec", "ba805367100fc4ac"], // 14 50
  ["17458a56dc634bb2", "ba83d9671012de35"], // 30 60
  ["17491456dc666c7", "ba83dd671012e51"], // 24 56
  ["17501c56dc6c984d", "ba8746671015cd43"], // 40 65
  ["17458656dc6344e6", "45009dd99cf56c9e"], // 34 82
  ["173f0156dc5df739", "450424d99cf887da"], // 13 87
  ["17428c56dc611941", "ba805d67100fd5aa"], // 8 44
  ["173f0456dc5dfc52", "ba83e1671012ebcd"], // 16 52
  ["17501c56dc6c984d", "ba8746671015cd43"], // 40 65
  ["17428856dc611275", "45041fd99cf87f5b"], // 4 92
  ["17428756dc6110c2", "ba805767100fcb78"], // 5 46
  ["17458456dc634180", "ba8748671015d0a9"], // 36 63
  ["17491556dc666dba", "ba83da671012dfe8"], // 27 59
  ["17501c56dc6c984d", "ba874b671015d5c2"], // 40 66
  ["17428356dc6109f6", "45009cd99cf56aeb"], // 1 81
  ["17428156dc610690", "ba805467100fc65f"], // 3 51
  ["173f0756dc5e016b", "45009bd99cf56938"], // 19 80
  ["17428656dc610f0f", "ba805c67100fd3f7"], // 6 43
  ["17491556dc666dba", "ba83da671012dfe8"], // 27 59
  ["17428256dc610843", "ba805367100fc4ac"], // 2 50
  ["173f0056dc5df586", "450098d99cf5641f"], // 12 85
  ["17491256dc6668a1", "ba83de671012e6b4"], // 22 55
  ["173f0256dc5df8ec", "ba805367100fc4ac"], // 14 50
  ["173f0656dc5dffb8", "ba83df671012e867"], // 18 54
  ["17458756dc634699", "ba8748671015d0a9"], // 35 63
  ["173f0556dc5dfe5", "45041ed99cf87da8"], // 17 93
  ["173f0556dc5dfe5", "ba83e1671012ebcd"], // 17 52
  ["173f0356dc5dfa9f", "45041ed99cf87da8"], // 15 93
  ["17428b56dc61178e", "ba8a4e67101810b2"], // 9 75
  ["173eff56dc5df3d3", "ba805a67100fd91"], // 11 49
  ["173efe56dc5df220", "ba805967100fcede"], // 10 48
  ["17490f56dc666388", "ba83de671012e6b4"], // 21 55
  ["17491056dc66653b", "ba83df671012e867"], // 20 54
  ["17490856dc6657a3", "ba805c67100fd3f7"], // 28 43
  ["17458456dc634180", "450423d99cf88627"], // 36 88
  ["17501a56dc6c94e7", "ba874c671015d775"], // 42 67
  ["17458456dc634180", "ba874a671015d40f"], // 36 69
  ["17491556dc666dba", "ba874f671015dc8e"], // 27 70
  ["17491356dc666a54", "ba8a4d6710180eff"], // 25 72
  ["173f0056dc5df586", "ba805e67100fd75d"], // 12 45
  ["17458856dc63484c", "ba83d8671012dc82"], // 32 61
  ["17458a56dc634bb2", "ba83dc671012e34e"], // 30 57
  ["173f0756dc5e016b", "ba83e0671012ea1a"], // 19 53
  ["17491156dc6666ee", "ba8a4c6710180d4c"], // 23 73
  ["17458956dc6349ff", "ba8747671015cef6"], // 33 62
  ["173f0256dc5df8ec", "ba8749671015d25c"], // 14 68
  ["17458a56dc634bb2", "ba83d9671012de35"], // 30 60
  ["17491156dc6666ee", "ba83de671012e6b4"], // 23 55
  ["173f0656dc5dffb8", "ba8750671015de41"], // 18 71
  ["17458856dc63484c", "450422d99cf88474"], // 32 89
  ["17491456dc666c7", "4500a1d99cf5736a"], // 24 78
  ["17491356dc666a54", "ba83dd671012e51"], // 25 56
  ["173f0656dc5dffb8", "4500a0d99cf571b7"], // 18 77
  ["17428c56dc611941", "ba805d67100fd5aa"], // 8 44
  ["17458656dc6344e6", "ba8a4f6710181265"], // 34 74
  ["79b25a4f80255a38", "c8ea8c1618ab0a58"], // 115 116
  ["e2c6e5e725342f4a", "89955cc3a594e51a"], // 125 126
  ["6d015b7858eb5119", "53441b80e563ef1f"], // 109 110
  ["4257e50e1c471596", "fe9697f9799c65be"], // 133 134
  ["2998f2424d0353eb", "ae57b2a84974c3a1"], // 111 112
  ["5b72bfac0ff3f885", "316e6b5e74bc7aa3"], // 113 114
  ["21f6c965b3513d5e", "d8f100cde5822516"], // 99  100
  ["6e6b46639f77f0c8", "1c1962488c012ee8"], // 105 106
  ["bc3d01fff751cde4", "6f948f09933cdfc"], // 123 124
  ["4257e30e1c471230", "fe9695f9799c6258"], // 137 138
  ["4257e40e1c4713e3", "fe9696f9799c640b"], // 135 136
  ["2998f2424d0353eb", "ae57b2a84974c3a1"], // 111 112
  ["e2c6e5e725342f4a", "89955cc3a594e51a"], // 125 126
  ["c63dec8a65b5c540", "6aebee2a2d6d8470"], // 121 122
  ["5c9a35ca819b38c8", "f9222e1acdf486e8"], // 119 120
  ["b8a5e528bfee71bc", "df017f3fefba274"], // 117 118
  ["21f6c865b3513bab", "d8f0ffcde5822363"], // 101 102
  ["21f6c965b3513d5e", "d8f100cde5822516"], // 99  100
  ["4257e50e1c471596", "fe9697f9799c65be"], // 133 134
  ["6d015b7858eb5119", "53441b80e563ef1f"], // 109 110
  ["db8629cba3383296", "4f1e561dd73ed3d8"], // 154 145
  ["6e6b46639f77f0c8", "1c1962488c012ee8"], // 105 106
  ["e2c6e5e725342f4a", "89955cc3a594e51a"], // 125 126
  ["5c9a35ca819b38c8", "f9222e1acdf486e8"], // 119 120
  ["4257e40e1c4713e3", "fe9696f9799c640b"], // 135 136
  ["5b72bfac0ff3f885", "316e6b5e74bc7aa3"], // 113 114
  ["4257e40e1c4713e3", "fe9696f9799c640b"], // 135 136
  ["6e6b46639f77f0c8", "1c1962488c012ee8"], // 105 106
  ["bc3d01fff751cde4", "6f948f09933cdfc"], // 123 124
  ["60ef1d711ae30cf0", "c80756327d5de60"], // 117 118
  ["4257e30e1c471230", "fe9695f9799c6258"], // 137 138
  ["b8a5e528bfee71bc", "df017f3fefba274"], // 103 104
  ["4c12cee7784c8b8", "7288f0346fd3cdd8"], // 127 128
  ["50eaf4685fa0785", "f9280759d6cc62a3"], // 129 130
  ["bc3d01fff751cde4", "6f948f09933cdfc"], // 123 124
  ["5584521f1e549486", "55846e1f1e54c41a"], // 156 157
  ["a178d4769765abac", "f4a830850f51d34"], // 107 108
  ["c63dec8a65b5c540", "6aebee2a2d6d8470"], // 121 122
  ["60ef1d711ae30cf0", "c80756327d5de60"], // 103 104
  ["4257e40e1c4713e3", "4f1e5b1dd73edc57"], // 135 148
  ["4c12cee7784c8b8", "7288f0346fd3cdd8"], // 127 128
  ["50eaf4685fa0785", "f9280759d6cc62a3"], // 129 130
  ["4257e50e1c471596", "fe9697f9799c65be"], // 133 134
  ["21f6c865b3513bab", "d8f0ffcde5822363"], // 101 102
  ["5b72bfac0ff3f885", "316e6b5e74bc7aa3"], // 113 114
  ["b0c9af2202b0a19e", "4f1e5c1dd73ede0a"], // 131 151
  ["4257e30e1c471230", "fe9695f9799c6258"], // 137 138
  ["a178d4769765abac", "f4a830850f51d34"], // 107 108
  ["5c9a35ca819b38c8", "f9222e1acdf486e8"], // 119 120
  ["db8629cba3383296", "4f1e561dd73ed3d8"], // 154 145
  ["b8a5e528bfee71bc", "df017f3fefba274"], // 117 118
  ["79b25a4f80255a38", "c8ea8c1618ab0a58"], // 115 116
  ["2998f2424d0353eb", "ae57b2a84974c3a1"], // 111 112
  ["6d015b7858eb5119", "4f1e5a1dd73edaa4"], // 109 149
  ["21f6c865b3513bab", "d8f0ffcde5822363"], // 101 102
  ["60ef1d711ae30cf0", "4f1e5d1dd73edfbd"], // 103 150
  ["5b72bfac0ff3f885", "316e6b5e74bc7aa3"], // 113 114
  ["79b25a4f80255a38", "c8ea8c1618ab0a58"], // 115 116
  ["6b37a94863bf68c0", "4f1e591dd73ed8f1"], // 155 146
  ["4257ea0e1c471e15", "fe969cf9799c6e3d"], // 139 140
  ["40bdbe4f3bcbac86", "9fdf11a0cde96b2e"], // 152 153
  ["c63dec8a65b5c540", "6aebee2a2d6d8470"], // 121 122
  ["6d015b7858eb5119", "53441b80e563ef1f"], // 109 110
  ["a178d4769765abac", "f4a830850f51d34"], // 107 108
  ["b0c9af2202b0a19e", "3d6f1fcb3898d356"], // 131 132
  ["60ef1d711ae30cf0", "c80756327d5de60"], // 103 104
  ["b8a5e528bfee71bc", "df017f3fefba274"], // 117 118
  ["6b37a94863bf68c0", "4f1e591dd73ed8f1"], // 155 146
  ["5c9a35ca819b38c8", "f9222e1acdf486e8"], // 119 120
  ["50eaf4685fa0785", "f9280759d6cc62a3"], // 129 130
  ["21f6c965b3513d5e", "d8f100cde5822516"], // 99  100
  ["4c12cee7784c8b8", "7288f0346fd3cdd8"], // 127 128
  ["4257ea0e1c471e15", "fe969cf9799c6e3d"], // 139 140
  ["a178d4769765abac", "f4a830850f51d34"], // 107 108
  ["e2c6e5e725342f4a", "89955cc3a594e51a"], // 125 126
  ["21f6c965b3513d5e", "d8f100cde5822516"], // 99  100
  ["2998f2424d0353eb", "ae57b2a84974c3a1"], // 111 112
  ["4257ea0e1c471e15", "fe969cf9799c6e3d"], // 139 140
  ["4257e30e1c471230", "4f1e581dd73ed73e"], // 137 147
  ["b0c9af2202b0a19e", "3d6f1fcb3898d356"], // 131 132
  ["bc3d01fff751cde4", "6f948f09933cdfc"], // 123 124
  ["c63dec8a65b5c540", "6aebee2a2d6d8470"], // 121 122
  ["4257ea0e1c471e15", "fe969cf9799c6e3d"], // 139 140
  ["6e6b46639f77f0c8", "1c1962488c012ee8"], // 105 106
  ["ea4c3915ea6f95a0", "3ea9df3b7b2b5990"], // 143 144
  ["ea4c3915ea6f95a0", "3ea9df3b7b2b5990"], // 143 144
  ["ea4c3915ea6f95a0", "3ea9df3b7b2b5990"], // 143 144
  ["ea4c3915ea6f95a0", "3ea9df3b7b2b5990"], // 143 144
  ["ea4c3915ea6f95a0", "3ea9df3b7b2b5990"], // 143 144
  ["ea4c3915ea6f95a0", "3ea9df3b7b2b5990"], // 143 144
];

const List<int> denLocations = [
  12, // 16 52
  12, // 37 64
  12, // 31 90
  12, // 3 51
  12, // 4 46
  12, // 33 62
  12, // 39 65
  12, // 1 48
  12, // 31 90
  2, // 26 59
  2, // 28 79
  2, // 26 58
  2, // 4 92
  2, // 26 59
  15, // 2 50
  15, // 6 47
  15, // Special
  4, // 7 44
  4, // 39 65
  4, // 31 61
  4, // 31 61
  16, // 9 75
  16, // 9 75
  16, // 44 42
  16, // 7 44
  16, // 9 91
  16, // 35 63
  0, // 38 64
  13, // 8 91
  13, // 41 76
  13, // 41 76
  13, // 5 46
  13, // 1 43
  7, // 15 51
  7, // 12 45
  7, // 11 49
  7, // 15 83
  7, // 11 84
  11, // 10 48
  11, // 41 76
  11, // 29 60
  11, // 41 76
  11, // 29 60
  4, // 29 86
  11, // 10 48
  10, // 14 50
  10, // 30 60
  10, // 24 56
  10, // 40 65
  1, // 34 82
  1, // 13 87
  1, // 8 44
  1, // 16 52
  1, // 40 65
  1, // 4 92
  1, // 5 46
  1, // 36 63
  1, // 27 59
  14, // 40 66
  14, // 1 81
  14, // 3 51
  14, // 19 80
  14, // 6 43
  14, // 27 59
  14, // 2 50
  14, // 12 85
  14, // 22 55
  14, // 14 50
  14, // 18 54
  14, // 35 63
  3, // 17 93
  3, // 17 52
  3, // 15 93
  3, // 9 75
  3, // 11 49
  3, // 10 48
  3, // 21 55
  3, // 20 54
  6, // 28 43
  3, // 36 88
  6, // 42 67
  6, // 36 69
  6, // 27 70
  6, // 25 72
  8, // 12 45
  8, // 32 61
  8, // 30 57
  8, // 19 53
  8, // 23 73
  8, // 33 62
  8, // 14 68
  5, // 30 60
  5, // 23 55
  5, // 18 71
  5, // 32 89
  5, // 24 78
  9, // 25 56
  9, // 18 77
  9, // 8 44
  9, // 34 74
  17, // 115 116
  17, // 125 126
  17, // 109 110
  17, // 133 134
  17, // 111 112
  17, // 113 114
  17, // 99  100
  17, // 105 106
  17, // 123 124
  17, // 137 138
  18, // 135 136
  18, // 111 112
  18, // 125 126
  18, // 121 122
  18, // 119 120
  18, // 117 118
  18, // 101 102
  18, // 99  100
  18, // 133 134
  19, // 109 110
  19, // 154 145
  19, // 105 106
  19, // 125 126
  19, // 119 120
  19, // 135 136
  20, // 113 114
  20, // 135 136
  20, // 105 106
  20, // 123 124
  20, // 117 118
  20, // 137 138
  20, // 103 104
  20, // 127 128
  21, // 129 130
  22, // 123 124
  22, // 156 157
  22, // 107 108
  22, // 121 122
  23, // 103 104
  23, // 135 148
  23, // 127 128
  23, // 129 130
  23, // 133 134
  23, // 101 102
  24, // 113 114
  24, // 131 151
  24, // 137 138
  24, // 107 108
  25, // 119 120
  25, // 154 145
  25, // 117 118
  25, // 115 116
  25, // 111 112
  25, // 109 149
  25, // 101 102
  26, // 103 150
  26, // 113 114
  26, // 115 116
  27, // 155 146
  27, // 139 140
  27, // 152 153
  27, // 121 122
  27, // 109 110
  27, // 107 108
  27, // 131 132
  28, // 103 104
  28, // 117 118
  28, // 155 146
  28, // 119 120
  28, // 129 130
  28, // 99  100
  28, // 127 128
  28, // 139 140
  28, // 107 108
  29, // 125 126
  29, // 99  100
  29, // 111 112
  29, // 139 140
  29, // 137 147
  30, // 131 132
  30, // 123 124
  30, // 121 122
  30, // 139 140
  30, // 105 106
  31, // 143 144
  31, // 143 144
  31, // 143 144
  31, // 143 144
  31, // 143 144
  31, // 143 144
];

class DenLoader {
  static Map<String, Den> _dens = Map<String, Den>();

  static Future<void> init() async {
    final data = await rootBundle.loadString('assets/data/nests.json');
    final json = jsonDecode(data);
    final tables = json['Tables'];

    for (int i = 0; i < tables.length; i++) {
      final table = tables[i];

      final hash = table['TableID'];

      List<Raid> swordRaids = List<Raid>(12);
      List<Raid> shieldRaids = List<Raid>(12);
      final swordEntries = table['SwordEntries'];
      final shieldEntries = table['ShieldEntries'];
      for (int j = 0; j < 12; j++) {
        final swordEntry = swordEntries[j];
        final shieldEntry = shieldEntries[j];

        final swordAbility = swordEntry['Ability'];
        final swordAltform = swordEntry['AltForm'];
        final swordIVCount = swordEntry['FlawlessIVs'];
        final swordGender = swordEntry['Gender'];
        final swordGigantamax = swordEntry['IsGigantamax'];
        final swordSpecies = swordEntry['Species'];
        final swordStar = List<bool>(5);
        for (int k = 0; k < 5; k++) {
          swordStar[k] = swordEntry['Stars'][k];
        }

        final shieldAbility = shieldEntry['Ability'];
        final shieldAltform = shieldEntry['AltForm'];
        final shieldIVCount = shieldEntry['FlawlessIVs'];
        final shieldGender = shieldEntry['Gender'];
        final shieldGigantamax = shieldEntry['IsGigantamax'];
        final shieldSpecies = shieldEntry['Species'];
        final shieldStar = List<bool>(5);
        for (int k = 0; k < 5; k++) {
          shieldStar[k] = shieldEntry['Stars'][k];
        }

        swordRaids[j] = Raid(swordAbility, swordAltform, swordIVCount,
            swordGender, swordGigantamax, swordSpecies, swordStar);
        shieldRaids[j] = Raid(shieldAbility, shieldAltform, shieldIVCount,
            shieldGender, shieldGigantamax, shieldSpecies, shieldStar);
      }

      _dens[hash] = Den(swordRaids, shieldRaids);
    }
  }

  static Den getDen(int index, int rarity) {
    final hash = denHashes[index][rarity];
    return _dens[hash];
  }

  static int getLocation(int index) {
    return denLocations[index];
  }
}
